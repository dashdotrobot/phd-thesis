%!TEX root = ../thesis.tex
\providecommand{\rootdir}{..}
\documentclass[\rootdir/thesis.tex]{subfiles}

\newcolumntype{L}{>{\raggedright\arraybackslash}X}

\begin{document}

A thesis entitled ``Reinventing the Wheel'' would not be complete without delving into the topic of optimization. For 150 years, bicycle designers and wheelbuilders have sought to improve the wheel across multiple performance metrics by changing dimensions, materials, and construction methods. This process occurred largely by trial-and-error, although in recent years component design has been greatly aided by finite-element simulation. My intent in this chapter is not to give an exhaustive optimization routine which can be followed to give the perfect wheel under any set of performance criteria, but rather to explore general trends which emerge when optimizing the wheel under a realistic set of constraints.

Optimization requires at minimum a space of tunable design parameters, an objective function defining the performance characteristic or characteristics to be optimized, and a model which predicts the performance characteristic as a function of the design parameters. Some design parameters are tunable by the wheelbuilder such as lacing pattern, spoke type, and component selection, while others are tunable by the component manufacturer such as rim cross-section shape, material, and hub flange spacing.

Keller tackled the problem of optimizing the spoke geometry in order to maximize a weighted sum of the lateral stiffness and torsional stiffness \cite{Keller2013}. With this objective function, most design parameters are trivial (e.g. spoke diameter will always optimize to the maximum possible value) so he limited the design space to the number of spokes on the left and right sides (with the total number fixed) and the in-plane spoke inclination angles ($\beta$ in this thesis). He used formulas for the lateral and torsional stiffness from Goldberg \cite{Goldberg1984} which are flawed in several respects\footnote{First, Goldberg treats the rim as a rigid body. This is a reasonable approximation for the torsional stiffness (Goldberg's formula is approximately equivalent to Equation \ref{eq:Ktan} in this thesis), however it is grossly incorrect for the lateral stiffness. Second, even if the rigid-rim approximation is used, Goldberg's formula gives a value which is approximately 50\% higher than the correct result (Equation \ref{eq:Klat_stiff_rim} in this thesis). This is apparently due to Goldberg's assumption that the rim translates as a rigid body in the lateral direction without rotation under a point load, which violates equilibrium as well as good sense.} although they trend in the correct direction. Keller's optimized wheels have different numbers of spokes on the left and right sides even for symmetrically-dished wheels, which suggests flaws in implementation\footnote{In calculating the lateral stiffness, he occasionally came across negative values which he incorrectly attributed to buckling. Goldberg's formulas do not capture elastic instability and the error is more likely due to a misinterpretation of signs.}. However, it is common to use spokes of different thicknesses on the left and right sides of an asymmetrically-dished wheel.

\begin{table}
\caption{Comparison of selected references on wheel optimization.}
\begin{tabularx}{\textwidth}{l L L L L L}
\hline
\bf Ref. & \bf Subject & \bf Design space & \bf Objective & \bf Model & \bf Algorithm\\
\hline
\cite{Svensson2015} & bicycle wheel    & spoke lacing pattern  & Multi-objective: stiffness and peak spoke force &
	Rigid rim, linear-elastic spokes$^{\rm a}$ & Genetic algorithm NSGA-II and NSGA-III \cite{Deb2002,Deb2014}\\

\cite{Keller2013}   & bicycle wheel    & spoke lacing pattern  & Weighted average of lateral stiffness and rotational stiffness &
	Rigid rim, linear-elastic spokes$^{\rm b}$ & brute-force search over hypercube\\

\cite{Zuo2011}      & automotive wheel & material distribution & Mean compliance$^{\rm c}$ &
	2D (plane stress) finite-element method & Bi-directional evolutionary structural optimization (BESO) \cite{Huang2007}\\
\hline
\end{tabularx}
\raggedright{$^{\rm a}$Using a video-game multiphysics engine.}\\
\raggedright{$^{\rm b}$Using equations developed by Goldberg \cite{Goldberg1984}.}\\
\raggedright{$^{\rm c}$Minimized the stored strain energy under a fixed loading scenario.}
\end{table}

Svensson optimized spoke lacing patterns using a multi-objective evolutionary approach \cite{Svensson2015}. The multi-objective framework is attractive for the bicycle wheel problem because the range of sensible objective functions (compliance, peak stress, mass) have different units and do not combine in a straightforward or unique way. Rather than searching for global optimal solutions, Svensson searched for solutions lying near the Pareto-optimal front (sets of solutions in which neither objective function can be minimized without penalizing another one). The lacing pattern was represented as prescribed connections between evenly-spaced hub holes and rim holes, so all of the evolved patterns could conceivably be realized with off-the-shelf components, unlike Keller's approach. A major drawback of Svensson's approach is the simplicity of the wheel model: the rim is represented as a rigid ring, while the spokes are treated as linear springs. The loads were applied at fixed locations, so some solutions evolved highly asymmetric spoke patterns which exploited the simulator by concentrated spokes at the load points. Nevertheless, the optimizer found several conventional spoke patterns including the ubiquitous ``3-cross'' pattern, and something closely resembling the lesser-known ``crows-foot'' pattern.

Zuo, Xie, and Huang optimized the material distribution in automotive wheels using a topology optimization approach \cite{Zuo2011}. They enforced a circumferential periodicity constraint with a prescribed number of pie-slice-shaped unit cells in order to guarantee realizable solutions. Wheel performance was assessed by a 2-dimensional finite-element model under differently-weighted combined loadings including tire pressure, tangential (braking or acceleration) traction, and distributed radial pressure from the ground reaction. Several of the optimum wheels generated bear striking resemblance to existing designs. Increasing the number of unit cells caused optimal designs for differently-weighted loading scenarios to converge.

Neither of the studies on bicycle wheels \cite{Svensson2015,Keller2013} reviewed here and no study that I am aware of incorporates the behavior of the rim into an optimization strategy for the bicycle wheel. A system-level approach to optimization of the wheel must consider the realistic mechanics of the wheel, especially given the relative flexibility of the rim compared to the spoke system. Even the wheelbuilder selecting off-the-shelf components has a daunting array of choices in material and cross-section. In this chapter I will explore a highly-simplified single-parameter optimization problem parameterized by the mass fraction of the rim and elucidate the trends and scaling laws for size and mass which emerge from this highly-constrained problem.


\section{Performance criteria}
\label{sec:performance_criteria}

This thesis is focused on structural behavior, so the performance criteria here will be restricted to structural characteristics. Many other relevant criteria including aerodynamics, effective inertia\footnote{including translational and rotational inertia plus a no-slip condition.}, and even aesthetics could be considered, but are beyond the scope of this thesis. The performance criteria considered here are lateral stiffness, buckling tension, and radial strength.

\subsubsection*{Lateral stiffness}
The lateral stiffness is perhaps the most intuitive parameter to the average consumer. Unlike the radial stiffness, which is orders of magnitude higher than the stiffness of the tire, the lateral stiffness is small enough that it may affect the handling, stability, and ``feel'' of the wheel (although structural characteristics of the bicycle itself may be more dominant)\todo{add citations}. As discussed in Chapter \ref{chap:buckling_ext_loads}, the lateral stiffness and spoke tension interact to give the maximum lateral force which can be withstood without spoke buckling.

\subsubsection*{Buckling tension}
The spokes must be sufficiently tight to support external loads without buckling, but not so tight that the lateral stiffness is severely reduced. As a general rule of thumb, the tension should be around \SI{50}{\percent} of the critical tension (see Section \ref{sec:buckling_lat_force}). Even though the critical tension is in no danger of being exceeded for any reasonable wheel design, increasing the critical tension allows the wheelbuilder to safely build to a higher tension.

\subsubsection*{Radial strength}
The radial strength, approximated by the competing failure modes model described in Section \ref{sec:Pc_nb}, is important for the carrying capacity and ability to withstand radial overload from potholes or steep drops.

The performance criteria described here are not independent---increasing the lateral stiffness generally increases the buckling tension and the radial strength.


\section{Design space}

The design space for a bicycle wheel includes parameters under the control of the wheelbuilder such as the rim type, spoke type, spoke lacing pattern, and average spoke tension.

\subsection{Relevant design parameters}
% Describe design parameters relevant to the theory


% Periodicity
The structural characteristics of the wheel should not vary significantly from point to point on the rim. It would do no good to significantly reinforce one segment of the wheel, only to have the wheel buckle after rotating \SI{180}{\degree}. In this chapter we will restrict our attention to periodic spoke patterns which can be accurately modeled by the smeared-spokes approximation \ref{sec:smeared_spokes}. Furthermore, decades of iteration have failed to produce a spoke pattern which has significant practical benefits over the traditional cross-laced pattern used on the majority of bikes. The lateral and radial stiffness are not significantly affected by the in-plane spoke angle $\beta$ while the torsional stiffness is maximized when the spokes are tangent or semi-tangent to the hub. It is sufficient to first optimize the remaining design parameters of a radial-spoked wheel and then substitute tangential spokes.

% Note about rim cross-section
One aspect of the wheel which has been aggressively and successfully optimized is the rim cross-section. The earliest bicycle rims were made of sections of wood, which was later supplanted by strip steel for most consumer rims. Wood remained the material of choice for racing until the development of extruded aluminum profiles which allowed the creation of very complex interior geometries\footnote{Mavic covertly introduced an aluminum rim into the 1934 Tour de France, painted to look like wood.}\todo{Add citation for footnote}. Rims with a hollow channel (double-wall rims) are superior to single wall rims because of their greatly increased torsional stiffness. There may still be opportunities to optimize the particular shape of the rim cross-section. However in the interest of generality I will assume that the rim cross-section is a hollow circle, characterized by its outer radius $r$ and wall thickness $t$. The moments of area for bending and torsion are:
\begin{equation}
I_1 = I_2 = \frac{\pi}{4} [r^4 - (r-t)^4], \,\,\,\,\, J = \frac{\pi}{2} [r^4 - (r-t)^4]
\end{equation}

The remaining wheel parameters considered are given in the first column of Table \ref{tab:design_space}.

\begin{table}
\caption{Wheel design parameters}
\label{tab:design_space}
\begin{tabularx}{\textwidth}{c}
\hline
Design space table\\
% \bf Header\\
% \hline
%   Hub
%     Diameter  optimizes to $2R$  Constrained
%     Width     optimizes to $2R$ and limited by frame  Constrained
%     Material  not captured in model  assumed rigid
%   Rim
%     Radius    optimizes to zero  Constrained
%     Cross-section width/height  
% 	  ...
%   Spokes
%     Number
%     Diameter
\hline
\end{tabularx}
% \raggedright{$^{\rm a}$Note 1.}
\end{table}


\subsection{Narrowing the design space}
% Many design parameters are constrained, trivial, or redundant
%   Rim radius trivially optimizes to zero. Obviously needs to be constrained
%   Number of spokes and EA_s are linked
%   Hub width trivially optimizes to approx 45 degree spoke angle, usually constrained anyway
%   Rim xc radius optimizes to infinity, unless otherwise constrained
%   Rim cross-section shape could be a parameter, or constrain to either circular or fixed mu
%   n_s*EA and rim(r, t) add up to total mass

The full design space described in Table \ref{tab:design_space} has seven dimensions plus two categorical variables (rim and spoke material). However, many of these parameters are either highly constrained or trivially optimize to one of their extreme limits. If left unconstrained the rim radius will go to zero or its minimum value if constrained. Likewise, the rim cross-section radius will automatically take on its maximum value. The only remaining non-trivial rim parameter is the cross-section thickness, which can also be parameterized by the rim mass. The rim parameters are linked by the equation
\begin{equation}
\label{eq:m_rim}
m_{rim} = 2\pi^2 \rho_r R (2rt - t^2)
\end{equation}

where $\rho_r$ is the mass density of the rim material. The spoke parameters are similarly linked. If the smeared spokes approximation is used, the stiffness of the spokes system only depends on the total cross-sectional area of the spokes, $n_sA_s$. If the discrete spokes method is used, $n_s$ will tend towards infinity while $A_s$ tends towards zero. Like the rim parameters, the spoke parameters can be grouped and parameterized by the total mass of the spokes:
\begin{equation}
\label{eq:m_spokes}
m_{spk} = \rho_s n_s A_s l_s
\end{equation}

where $\rho_s$ is the mass density of the spoke material. The hub parameters are important for how they affect the geometry of the spoke system. In this thesis it is assumed that the hub is much stiffer than the spoke and rim system. If the hub flange diameter is not constrained it will exploit the hub rigidity assumption by optimizing to a value close to the diameter of the rim, thereby shortening the spokes and increasing the spoke bracing angle. The hub width will always optimize to make the spoke angle approximately \SI{45}{\degree} to maximize the lateral stiffness for a given volume\footnote{This can be demonstrated by the following argument: noting that if the hub diameter is much smaller than the rim diameter, the rim radius is approximately $R \approx l_s \cos{\alpha}$. The lateral stiffness of a single spoke is $K_s^{lat} = (E_sA_s/l_s)\sin^2{\alpha}$. If the volume $V_s=A_sl_s$ is held fixed, the lateral stiffness becomes $K_s^{lat} = E_sV_s/R^2 \cos^2{\alpha}\sin^2{\alpha}$. This function is maximized at $\alpha=\SI{45}{\degree}$, implying a hub width approximately equal to the rim diameter.}. The hub width is constrained by the available space in the frame after accommodating the sprockets, and should fixed.

\subsection{Rim mass fraction}
% Describe rim mass fraction parameter.
% Develop expressions for t and n_s*A_s as a function of:
%   f_rim, R, M, w/R, r/R, rho_rim/rho_spokes

The complete design vector for a wheel, under the constraints and assumptions described above, can be written as
\begin{equation}
\label{eqn:design_vector}
\chi = \left\lbrace f_{rim}, (R, M), \left(\frac{r}{R}, \frac{w_h}{R}, \frac{d_h}{R}\right), (E_r, G_r, E_s, \rho_r, \rho_s) \right\rbrace
\end{equation}

where $f_{rim} = m_{rim}/M$ is the fraction of wheel mass in the rim, and $M=m_{rim} + m_{spk}$ is the total mass of the wheel, not counting the hub. The remaining groups in the design vector are as follows: $\chi_{extent}=(R, M)$ are the extensive properties of the wheel (radius and mass). $\chi_{geom} = \left(\frac{r}{R}, \frac{w_h}{R}, \frac{d_h}{R}\right)$ are dimensionless properties governing the geometry of the wheel including the rim slenderness $r/R$, the dimensionless hub width $w_h/R$, and the dimensionless hub diameter $d_h/R$. The material vector $\chi_{matl}= (E_r, G_r, E_s, \rho_r, \rho_s)$ describes the relevant material properties of the rim and spokes.

Described in this manner the design vector provides a way to compare wheels of equivalent size, shape, and materials. It does not make sense to compare a wheel with a \SI{50}{mm} hub width to a wheel with a \SI{70}{mm} hub width, nor to compare a 700C wheel to a 20" folding bike wheel; one will always outperform the other on the metrics considered here. The remaining relevant parameter, the rim mass fraction, is an intuitive design parameter which can be optimized for a wheel of a given size, geometry, and material. Low $f_{rim}$ means more or heavier spokes with a slender rim while high $f_{rim}$ means a heavier rim supported by fewer or lighter spokes.

% \begin{figure}
% \centering
% \includesvg{\rootdir/figs/optimization/}{f_rim_illustration}
% \caption{...}
% \label{fig:f_rim_illustration}
% \end{figure}

In terms of the parameters collected in the design vector, the rim wall thickness, spoke length, and total spoke cross-sectional area are:
\begin{equation}
\label{eqn:design:t}
t = R\left[ \left(\frac{r}{R}\right) - \sqrt{\left(\frac{r}{R}\right)^2 - \frac{f_rM}{2\pi^2\rho_rR^3}}\right]
\end{equation}
\begin{equation}
\label{eqn:design:ls}
l_s = R\sqrt{\left[1-\frac{1}{2}\left(\frac{d_h}{R}\right)\right]^2 + \frac{1}{4}\left(\frac{w_h}{R}\right)^2}
\end{equation}
\begin{equation}
\label{eqn:design:nsAs}
n_sA_s = \frac{M(1-f_{rim})}{l_s\rho_s}
\end{equation}

The hub flange diameter clearly cannot exceed twice the rim radius. For the reasons described above, $(d_h/R)$ will be fixed at 0.166 for all the wheels studied here. Nominally, the rim mass fraction $f_{rim}$ may vary from zero (all spokes) to one (all rim). However, if $\chi_{extent}$, $\chi_{geom}$, and $\chi_{matl}$ are fixed, $f_{rim}$ may have a lower upper bound due to the fact that the rim wall thickness may not be greater than the cross-section radius. This sets an upper bound on the total rim mass, which if less than $M$ may impose an upper limit on $f_{rim}$.
\begin{equation}
\label{eqn:frim_max}
f_{rim}^{max} = \min\left\lbrace 1.0, \frac{2\pi^2 R^3\rho_r}{M}\left(\frac{r}{R}\right)^2 \right\rbrace
\end{equation}

\section{One-parameter optimization}
% Figure: Trends in 1-D optimization.
%   For 4 different masses: (a) K_lat vs. f_rim (b) T_c vs. f_rim (c) P_c vs f_rim
%   Compare against ABAQUS results for one mass

% Stiffness optimum does not depend on M or R

% Buckling tension:
%   Must go to zero at f_rim->0
%   Goes to Timoshenko solution at f_rim->1
%   Determine funcitonal form of T_c(f_rim)

With $\chi_{extent}$, $\chi_{geom}$, and $\chi_{matl}$ fixed, the optimization problem outlined above reduces to a bounded, single-parameter search. Figure \ref{fig:opt_1D_trends} shows how the performance criteria outlined in Section \ref{sec:performance_criteria} vary with $f_{rim}$ for wheels with different masses. 

The optimum rim mass fraction to maximize the lateral stiffness does not depend on $M$ or $R$. The lateral stiffness favors a relatively light rim and heavy---or many---spokes. This strategy also has the advantage that concentrating the mass in the spokes decreases the rotational inertia of the wheel for a given mass and radius. The behavior of $K_{lat}$ with $f_{rim}$ reflects the differing roles of the spokes and rim in supporting loads. The spokes support external loads and channel forces to the hub, while the rim acts mainly to spread the load so that it is shared between several spokes. The returns on rim mass diminish once the rim is sufficiently stiff to involve a few spokes in the load-affected area.


\todo{Change y-axis on buckling tension figure to $\bar{T}_c$.}
\begin{figure}
\centering
\includesvg{\rootdir/figs/optimization/}{1D_trends}
\caption{...}
\label{fig:opt_1D_trends}
\end{figure}

\inprogress

\end{document}
